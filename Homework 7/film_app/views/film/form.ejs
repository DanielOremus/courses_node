<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title><%=title%></title>
  </head>
  <body>
    <div class="form-container">
      <% if(errors.length){%>
      <div class="errors-container">
        <%for (const error of errors){%>
        <div><%=error.msg%></div>
        <%}%>
      </div>
      <%}%>
      <form
        action="/films/update/<%= film?._id || ''%>"
        method="post"
        enctype="application/x-www-form-urlencoded"
      >
        <label>
          Title
          <input type="text" name="title" value="<%=film?.title%>" />
        </label>
        <label>
          Description
          <textarea name="description"><%=film?.description%></textarea>
        </label>
        <label>
          Release Date
          <input
            type="date"
            name="releaseDate"
            value="<%= film?.releaseDate instanceof Date && !isNaN(film.releaseDate) ? film.releaseDate.toISOString().slice(0, 10) : '' %>"
          />
        </label>
        <fieldset>
          <legend>Genre</legend>
          <label>
            Horror <input type="checkbox" name="genre" value="horror"
            <%=film?.genre?.includes('horror')? 'checked' : ''%> />
          </label>
          <label>
            Comedy <input type="checkbox" name="genre" value="comedy"
            <%=film?.genre?.includes('comedy')? 'checked' : ''%> />
          </label>
          <label>
            Thriller <input type="checkbox" name="genre" value="thriller"
            <%=film?.genre?.includes('thriller')? 'checked' : ''%> />
          </label>
          <label>
            Detective <input type="checkbox" name="genre" value="detective"
            <%=film?.genre?.includes('detective')? 'checked' : ''%> />
          </label>
          <label>
            Romantic <input type="checkbox" name="genre" value="romantic"
            <%=film?.genre?.includes('romantic')? 'checked' : ''%> />
          </label>
        </fieldset>
        <div class="buttons-container">
          <button type="submit"><%=film?._id ? 'Update' : 'Add'%></button>
          <a href="/films">
            <button type="button">Back</button>
          </a>
        </div>
      </form>
    </div>
  </body>
</html>
